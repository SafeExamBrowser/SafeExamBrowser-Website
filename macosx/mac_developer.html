<!DOCTYPE html>
<html lang="en"><!-- InstanceBegin template="/Templates/main-E.dwt" codeOutsideHTMLIsLocked="false" -->

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=gAEABXnBxw">
    <link rel="icon" type="image/png" href="/favicon-32x32.png?v=gAEABXnBxw" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png?v=gAEABXnBxw" sizes="16x16">
    <link rel="manifest" href="/manifest.json?v=gAEABXnBxw">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=gAEABXnBxw" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon.ico?v=gAEABXnBxw">
    <meta name="apple-mobile-web-app-title" content="SEB">
    <meta name="application-name" content="SEB">
    <meta name="theme-color" content="#ffffff">

<!-- InstanceBeginEditable name="head" -->
        <script src="../SpryAssets/SpryCollapsiblePanel.js" type="text/javascript"></script>
        <link href="../SpryAssets/SpryCollapsiblePanel.css" rel="stylesheet" type="text/css" />
<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="doctitle" -->
        <title>Safe Exam Browser</title>
        <!-- InstanceEndEditable -->

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../css/modern-business.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- Docs CSS -->
	<link href="../css/docs.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

<link href="../css/basic.css" rel="stylesheet" type="text/css" media="all">

</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="../news_en.html" class="navbar-brand">
                  <span><img class="sebbrandimg" src="../images/SEBIcon_40_2x.png" alt="SEB Logo" width="40"></span>
                  Safe&nbsp;Exam&nbsp;Browser
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="../news_en.html">News</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../about_overview_en.html">Overview</a>
                            </li>
                            <li>
                                <a href="../about_demo_en.html">Demo</a>
                            </li>
                            <li>
                                <a href="../about_roadmap_en.html">Roadmap</a>
                            </li>
                            <li>
                                <a href="../about_publications_en.html">Publications</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Consortium<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../consortium/members.html">Members</a>
                            </li>
                            <li>
                                <a href="../consortium/board.html">Board</a>
                            </li>
                            <li>
                                <a href="../consortium/documents.html">Documents</a>
                            </li>
                            <li>
                                <a href="../consortium/benefits.html">Benefits</a>
                            </li>
                            <li>
                                <a href="../consortium/fees.html">Fees</a>
                            </li>
                            <li>
                                <a href="../consortium/join.html">Join</a>
                            </li>
                            <li>
                                <a href="../consortium/donate.html">Donate</a>
                            </li>
                            <li>
                                <a href="../consortium/faq.html">FAQ</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../download_en.html">Downloads</a>
                            </li>
                            <li>
                                <a href="../download_releases_en.html">Former Releases</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Windows<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../windows/win_usermanual_en.html">User Manual</a>
                            </li>
                            <li>
                                <a href="../windows/win_release_notes_en.html">Release Notes</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">macOS<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="mac_usermanual_en.html">User Manual</a>
                            </li>
                            <li>
                                <a href="mac_release_notes_en.html">Release Notes</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">iOS<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../ios/ios_usermanual_en.html">User Manual</a>
                            </li>
                            <li>
                                <a href="../ios/ios_tutorial_en.html">Tutorial</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../developer/overview.html">Developer Information</a>
                            </li>
                    		<li>
                        		<a href="../support_en.html">Support Links</a>
                    		</li>
                    		<li>
                    			<a href="../faq/faq_en.html">FAQ</a>
                    		</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
      </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container bs-docs-container">

    <!-- InstanceBeginEditable name="MainContent" -->
            <h4>Developer Manual SEB for macOS</h4>
            <p><strong>Disclaimer:</strong> This page is not yet updated to reflect the current SEB version 2.0. Most of this information is therefore outdated. Please note that the source code of SEB version 2.x is no longer available in the SEB SourceForge SVN repository, but on <a href="https://sourceforge.net/p/seb/git/ci/master/tree/" target="_blank">SourceForge Git</a>.</p>
            <p>This manual is providing  information about the architecture of Safe Exam Browser for Mac&nbsp;OS&nbsp;X, about  getting  the  SEB (and WebKit) sources, linking the components and  how to build SEB. </p>
<div id="CollapsiblePanel1" class="CollapsiblePanel">
            <div class="CollapsiblePanelTab" tabindex="0"><strong>Contents</strong> <span class="textklein">Hide/Show</span></div>
            <div class="CollapsiblePanelContent"><a href="#architecture">Architecture</a><br />
                <a href="#getSourceCode">Getting Source Code</a><br />
                <a href="#localisation">Localizing  SEB </a><br />
                <a href="#privateWebKit">Private Copy of WebKit</a><br />
                <a href="#bitBundles">Creating 32/64 bit bundles</a><br />
                <a href="#addingNewFrameworkVersions">Adding new WebKit version</a> </div>
          </div>
            <h4><a name="architecture" id="architecture"></a>Architecture</h4>
            <p>SEB for macOS is a modern Mac&nbsp;OS&nbsp;X application, written in Objective-C, using the Cocoa system framework. It has been developed for Mac&nbsp;OS&nbsp;X 10.6 Snow Leopard and updated for OS&nbsp;X&nbsp;10.7 Lion, we don't intend to support older system versions. SEB for macOS is using the <a href="http://www.webkit.org" target="_blank">WebKit</a> browser engine, on which Safari on Mac and iOS and some new open source browsers like Google Chrome and Android browsers are based. SEB for macOS embeds a private copy of the WebKit framework, so Apple updates of Safari don't affect the compatibility of SEB with existing quizzes. Please note: This doesn't apply to the   Mac App Store version of SEB which is using the system's built-in WebKit framework (due to restrictions of the Mac App Store). </p>
            <p>SEB for macOS  version 1.3 consists of the classes listed below. The class structure is supposed to change soon, since SEB will go trough major enhancements in the next months. Among others there will be additional preferences panes for more options and SEB will be ported to a document-based architecture to support opening multiple webpages in separate windows and tabs.</p>
    <h5>List of Classes</h5>
            <ul id="seblist">
            <li class="normal_line_height" id="half_linespace"><span class="codetext">SEBController</span><br />
                Main Safe Exam Browser controller class.  Locks  system into  kiosk mode, opens browser and preferences window and exits SEB.</li>
            <li class="normal_line_height" id="half_linespace"><span class="codetext">BrowserWindow</span><br />
                Browser window class, also containing all the web view delegates, which handle right clicks in the browser window and  web plugins, requests to open link in a new window, Javascript alerts and browser errors.</li>
            <li class="normal_line_height" id="half_linespace"><span class="codetext">CapView</span><br />
                View class for the windows covering all attached screens with a black background. By overriding the mouseDown event it's prevented that the cap window is ordered front when clicked in.</li>
            <li class="normal_line_height" id="half_linespace"><span class="codetext">AboutWindow</span><br />
                Window class for the about panel (window without border and title bar). Loads and displays localized copyright and version from info.plist and closes the about window when the user clicks on it.</li>
            <li class="normal_line_height" id="half_linespace"><span class="codetext">aboutView</span><br />
                View class for the about panel, necessary for the background image in the borderless window.</li>
            <li class="normal_line_height" id="half_linespace"><span class="codetext">PreferencesController</span><br />
                Controller for the preferences window, populates it with panes.</li>
            <li class="normal_line_height"><span class="codetext">PrefsGeneralViewController</span><br />
              Preferences General Pane: Settings for passwords to enter preferences and quit SEB, buttons to quit and restart SEB, show About panel and help. 
            Loads and saves preferences from the system's user defaults database and implements Cocoa Bindings for confirm password  check.</li>
            <li class="normal_line_height"><span class="codetext">PrefsAdvancedViewController</span><br />
              Preferences Advanced Pane: Settings for using third party applications together with SEB. Implemented with Cocoa Bindings to the Shared User Defaults Controller.</li>
            <li class="normal_line_height"><span class="codetext">MBPreferencesController</span><br />
              MBPreferencesController provides an  implementation of a standard preferences window. It handles the creation and display of the preferences window as well as switching between different modules/panes using the toolbar.</li>
          </ul>
    <p>As usual for Cocoa applications, you also have to examine the Interface Builder XIB file to understand how  SEB GUI elements work, especially Cocoa bindings in the preferences window. At the moment the GUI elements are contained the XIB files <span class="codetext">MainMenu.xib</span>,<span class="codetext"> PreferencesGeneral.xib</span>. and <span class="codetext">PreferencesAdvanced.xib</span>.</p>
            <h4><a name="getSourceCode"></a>Getting the SEB code</h4>
            <p class="no_linespace">Add the SEB Sourceforge repository to Xcode. In Xcode 4 you do this in the Organizer windows' Repositories tab (see the Xcode documentation for details). Name it as you like and use the URL below as Location:</p>
            <p class="codetext">https://seb.svn.sourceforge.net/svnroot/seb</p>
            <p>Type is Subversion, and you don't need a username or password to check out the code.</p>
            <p>You will find the current developer version of SEB for macOS at the path <span class="path">trunk/mac/SafeExamBrowser-src</span>. Checkout this directory to your computer.</p>
            <h4><a name="localisation"></a>Localizing SEB</h4>
            <p class="no_linespace">To translate Interface Builder xib files, you best use the <span class="codetext">ibtool</span> command-line utility to extract all the strings. Enter in Terminal:</p>
            <p class="sourcecode" id="full_linespace">ibtool --generate-strings-file en.lproj/MainMenu.strings en.lproj/MainMenu.xib</p>
            <p>The resulting file <span class="codetext">MainMenu.strings</span> can be given to the translator. Best is to keep it in the UTF-16 text encoding format, for example Apple's TextEdit reads and saves this format correctly.</p>
            <p class="no_linespace">Below the commands for the other xib files:</p>
            <p class="sourcecode" id="half_linespace">ibtool --generate-strings-file en.lproj/PreferencesGeneral.strings en.lproj/PreferencesGeneral.xib</p>
    <p class="sourcecode" id="half_linespace">ibtool --generate-strings-file en.lproj/PreferencesBrowser.strings en.lproj/PreferencesBrowser.xib</p>
    <p class="sourcecode" id="full_linespace">ibtool --generate-strings-file en.lproj/PreferencesAdvanced.strings en.lproj/PreferencesAdvanced.xib</p>
            <p class="no_linespace">Afterwards you can generate a new <span class="codetext">MainMenu.xib</span> file based on the original one and the translated strings file, again using  <span class="codetext">ibtool</span>:</p>
    <p class="sourcecode" id="full_linespace">ibtool --strings-file fr.lproj/MainMenu.strings --write fr.lproj/MainMenu.xib en.lproj/MainMenu.xib</p>
            <p>Then you need to add the resource file to Xcode. I didn't find a better way in Xcode 4 than clicking on the Resource folder, adding a localisation with the + button in the utility area at the right of the workspace window and then pasting the contents of the strings-file into the new created language/region specific file (I guess there's a bug in Xcode 4, in Xcode 3 it was possible to add the files directly).</p>
            <p class="no_linespace">Here the commands for the other localized xib files (English to German):</p>
            <p class="sourcecode" id="half_linespace">ibtool --strings-file de.lproj/PreferencesGeneral.strings --write de.lproj/PreferencesGeneral.xib en.lproj/PreferencesGeneral.xib</p>
    <p class="sourcecode" id="half_linespace">ibtool --strings-file de.lproj/PreferencesBrowser.strings --write de.lproj/PreferencesBrowser.xib en.lproj/PreferencesBrowser.xib</p>
    <p class="sourcecode" id="full_linespace">ibtool --strings-file de.lproj/PreferencesAdvanced.strings --write de.lproj/PreferencesAdvanced.xib en.lproj/PreferencesAdvanced.xib</p>
            <p class="no_linespace">Here the commands for the other localized xib files (English to French):</p>
            <p class="sourcecode" id="half_linespace">ibtool --strings-file fr.lproj/PreferencesGeneral.strings --write fr.lproj/PreferencesGeneral.xib en.lproj/PreferencesGeneral.xib</p>
            <p class="sourcecode" id="half_linespace">ibtool --strings-file fr.lproj/PreferencesBrowser.strings --write fr.lproj/PreferencesBrowser.xib en.lproj/PreferencesBrowser.xib</p>
            <p class="sourcecode" id="full_linespace">ibtool --strings-file fr.lproj/PreferencesAdvanced.strings --write fr.lproj/PreferencesAdvanced.xib en.lproj/PreferencesAdvanced.xib</p>
<p>In the end you should check the GUI in the new localized MainMenu.xib in Xcode/Interface Builder and adjust size and position of text fields according to the length of the localized text.</p>
            <h5>Localizing String Ressources</h5>
            <p>Strings placed in the code instead of xib files are even easier to localize. In each <span class="codetext">.lproj</span> language directory you can find a file <span class="codetext">Localizable.strings</span>, containing all original and the corresponding localized strings. You just have to use the appropriate string-loading macros in the code (for example <span class="codetext">NSLocalizedString(@&quot;FirstTimeUserNotice&quot;, nil)</span> and then use the <span class="codetext">genstrings</span> command-line tool to extract those strings and create strings files for you. For example:            </p><p class="sourcecode" id="full_linespace">genstrings -o en.lproj *.m</p>
    <p>This command  parses all Objective-C source files in the current directory and puts the resulting strings files in the <span class="codetext">en.lproj</span> subdirectory.
              You can then use this English  <span class="codetext">Localizable.strings</span> file to create the according files for  other languages, by replacing the English strings with the translated ones, for example:
</p>
    <p class="sourcecode" id="half_linespace">&quot;FirstTimeUserNotice&quot; = &quot;Bitte benutzen Sie die Fenster-Schliessen-Schaltfläche oder Befehlstaste+Q um SEB zu beenden und (fn+)F3+F6 um die Einstellungen zu öffnen.\n\nDieser Hinweis wird solange angezeigt, bis Sie in den Einstellungen eine Start-URL eingeben. Sie sollten dort ausserdem ein Beenden-Passwort und ein Administrator-Passwort festlegen, um das Beenden von SEB und den Zugang zu den Einstellungen einzuschränken.&quot;; </p>
    <p>(This is one line of the German localized strings file  <span class="path">de.lproj/Localizable.strings</span>)</p>
     <h4> <a name="privateWebKit" id="privateWebKit"> </a>Preparing a private copy of WebKit for use with SEB</h4>
            <p>Until version 1.4.1, SEB downloaded from this website contained a private copy of WebKit. From version 1.5 it was omitted, because experiences didn't show any  real advantage of using a private WebKit instead of the system's in practice, but there was a lot of additional time and effort needed for every update. Besides that at least some WebKit builds from December 2011 and January 2012 were not working on Mac OS X 10.6.8 anymore (and compiling on Snow Leopard resulted in build errors). But besides you can find how to include your private copy of WebKit if you see an advantage in that:</p>
            <p>Check out the WebKit source code in Terminal:</p>
            <ul id="seblist">
            <li class="normal_line_height" id="half_linespace"> <p>Change to your working directory</p></li>
            <li class="normal_line_height" id="half_linespace">
              <p class="no_linespace"> Enter the following command in Terminal (and be prepared that it may take several hours):</p>
                <p class="sourcecode"id="half_linespace">svn checkout http://svn.webkit.org/repository/webkit/trunk WebKit-src</p>
                <p>(the last line should say something like <span class="codetext">Checked out revision 71626.</span>)</p>
            </li>
          <li class="normal_line_height" id="half_linespace">
            <p class="no_linespace"> In case you want to update a WebKit build checked out some time ago, you can use the <span class="codetext">update-webkit</span> script:</p>
            <p class="sourcecode"id="half_linespace">Tools/Scripts/update-webkit</p>
                <p>(the last line should say something like <span class="codetext">Updated to revision 71728</span>.)</p>
          </li>
          <li class="normal_line_height" id="half_linespace">
            <p class="no_linespace"> Now open from the framework source directories in <span class="path">WebKit-src/Source/</span> each <span class="codetext">.xcodeproj</span> of <span class="codetext">JavaScriptCore</span>, <span class="codetext">JavaScriptGlue</span>, <span class="codetext">WebCore</span> and <span class="codetext">WebKit</span> in Xcode and select the  framework bundle in <span class="quote">Target</span>. Go on <span class="quote">Build Settings</span> and change in section <span class="quote">Deployment</span> the <span class="quote">Installation Directory</span> for release to the following special path:</p>
                <p class="codetext"id="half_linespace">@executable_path/../Frameworks</p>
                <p>Then close each of the Xcode projects, the new path will be saved automatically. </p>
          </li>
          <li class="normal_line_height" id="full_linespace">
            <p class="no_linespace"> Change to the WebKit directory:</p>
                <p class="command_linespace" id="full_linespace"><span class="sourcecode">cd WebKit-src</span><br /></p>
          </li>
          <li class="normal_line_height" id="half_linespace">
            <p class="no_linespace">Build WebKit (this will also take some time and stress your CPU quite a lot, so you might want to run it during your lunch break).<br />
                Building has to be done twice, separately for the 32- and 64-bit build:</p>
                <p class="sourcecode"id="half_linespace">Tools/Scripts/set-webkit-configuration --32-bit</p>
                <p class="sourcecode"id="half_linespace">Tools/Scripts/build-webkit</p>
                <p>(it should be written somewhere in the end <span class="codetext">** BUILD SUCCEEDED **</span>)</p>
          </li>
            <li class="normal_line_height" id="half_linespace"><p class="no_linespace">Now you have the build 32-bit frameworks in directory <span class="path">WebKitBuild/Release</span>. Rename it to <span class="path">WebKitBuild/Release-i386</span>. Build the 64-bit version:</p>
              <p class="sourcecode"id="half_linespace">Tools/Scripts/set-webkit-configuration --64-bit</p>
              <p class="sourcecode" id="half_linespace">Tools/Scripts/build-webkit</p>
              <p>Rename the built 64-bit framework directory <span class="path">WebKitBuild/Release/</span> to <span class="path">WebKitBuild/Release-x86_64</span>.</p></li>
            <li><p class="no_linespace">In Terminal you can check if the relative paths have been set in the frameworks with the <span class="codetext">otool -L</span> command, for example: </p>
                <p class="sourcecode">otool -L WebKitBuild/Release-x86_64/WebCore.framework/WebCore</p>
                <div class="sourcecode" id="codeblock">
                <p class="sourcecode">WebKitBuild/Release-x86_64/WebCore.framework/WebCore:</p>
                  <p class="sourcecode indent1">@executable_path/../Frameworks/WebCore.framework/Versions/A/WebCore (compatibility version 1.0.0, current version 534.13.0)</p>
                  <p class="sourcecode indent1">/usr/lib/libsqlite3.dylib (compatibility version 9.0.0, current version 9.6.0)</p>
                  <p class="sourcecode indent1">/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 227.0.0)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices (compatibility version 1.0.0, current version 38.0.0)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/Carbon.framework/Versions/A/Carbon (compatibility version 2.0.0, current version 152.0.0)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa (compatibility version 1.0.0, current version 15.0.0)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit (compatibility version 1.0.0, current version 275.0.0)</p>
                    <p class="sourcecode indent1">@executable_path/../Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore (compatibility version 1.0.0, current version 534.13.0)</p>
                  <p class="sourcecode indent1">/usr/lib/libicucore.A.dylib (compatibility version 1.0.0, current version 40.0.0)</p>
                  <p class="sourcecode indent1">/usr/lib/libxml2.2.dylib (compatibility version 10.0.0, current version 10.3.0)</p>
                  <p class="sourcecode indent1">/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.3)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL (compatibility version 1.0.0, current version 1.0.0)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore (compatibility version 1.2.0, current version 1.6.3)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration (compatibility version 1.0.0, current version 293.6.0)</p>
                    <p class="sourcecode indent1">/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)</p>
                  <p class="sourcecode indent1">/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.1)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices (compatibility version 1.0.0, current version 44.0.0)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 550.42.0)</p>
                  <p class="sourcecode indent1">/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 751.42.0)</p>
                    <p class="sourcecode indent1">/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 1038.35.0)</p>
              </div>
                <p>As you can see, <span class="codetext">WebCore.framework</span> and <span class="codetext">JavaScriptCore.framework</span> have the right path <span class="codetext">@executable_path/../Frameworks</span>  now.</p>
              </li>
          </ul>
            <h4> <a name="bitBundles" id="sourceLMSExtensions2"></a>Creating 32/64 bit bundles of the frameworks</h4>
            <p class="no_linespace">For this we need the <span class="codetext">lipo</span> command in Terminal:</p>
            <p class="sourcecode" id="full_linespace">lipo -create WebKitBuild/Release-i386/JavaScriptCore.framework/JavaScriptCore WebKitBuild/Release-x86_64/JavaScriptCore.framework/JavaScriptCore -output WebKitBuild/JavaScriptCore</p>
            <p class="no_linespace">We can check what the resulting <span class="quote">fat</span> framework file contains:</p>
<p class="sourcecode">lipo -detailed_info WebKitBuild/JavaScriptCore</p>
              <div class="sourcecode" id="codeblock">
              <p class="sourcecode">Fat header in: /Users/drs/developer/WebKit-src/WebKitBuild/JavaScriptCore<br />
              fat_magic 0xcafebabe<br />
              nfat_arch 2</p>
              <p class="sourcecode">architecture i386</p>
              <p class="sourcecode margin1">cputype CPU_TYPE_I386<br />
              cpusubtype CPU_SUBTYPE_I386_ALL<br />
              offset 4096<br />
              size 2933032<br />
              align 2^12 (4096)</p>
              <p class="sourcecode">architecture x86_64<br />
              <p class="sourcecode margin1">cputype CPU_TYPE_X86_64<br />
              cpusubtype CPU_SUBTYPE_X86_64_ALL<br />
              offset 2940928<br />
              size 2993520<br />
              align 2^12 (4096)</p>
              </div>
            <p>So now we have a framework file with 32 and 64 bit binaries inside!</p>
            <p class="no_linespace">We have to make the other frameworks <span class="quote">fat</span> too:</p>
            <p class="sourcecode" id="half_linespace">lipo -create WebKitBuild/Release-i386/JavaScriptGlue.framework/JavaScriptGlue WebKitBuild/Release-x86_64/JavaScriptGlue.framework/JavaScriptGlue -output WebKitBuild/JavaScriptGlue </p>
    <p class="sourcecode" id="half_linespace">lipo -create WebKitBuild/Release-i386/WebCore.framework/WebCore WebKitBuild/Release-x86_64/WebCore.framework/WebCore -output WebKitBuild/WebCore</p>
            <p class="sourcecode" id="full_linespace">lipo -create WebKitBuild/Release-i386/WebKit.framework/WebKit WebKitBuild/Release-x86_64/WebKit.framework/WebKit -output WebKitBuild/WebKit</p>
            <p>In the end we have to copy the newly created fat framework binaries into the <span class="codetext">.framework</span> bundles. You can first duplicate one of the <span class="path">WebKitBuild/Release </span> directories and rename it  <span class="path">WebKitBuild/Release-FAT</span>. Then copy the four fat framework binaries <span class="codetext">JavaScriptCore</span>, <span class="codetext">JavaScriptGlue</span>, <span class="codetext">WebCore</span> and <span class="codetext">WebKit</span> to the right place in the <span class="codetext">.framewor</span>k bundles  (overwriting the old framework binaries). Usually the subdirectory <span class="path">xxx.framework/Versions/A/</span> is the right location for the framework binaries.<br />
          </p>
            <h4><a name="addingNewFrameworkVersions" id="addingNewFrameworkVersions"></a>Add new versions of the embedded WebKit frameworks</h4>
            <p id="quarter_linespace">To comply with version control, you first have to delete the old version of the frameworks in Xcode (remove it with the SVN command in terminal or in Xcode):</p>
    <p class="sourcecode" id="half_linespace">svn delete --force SafeExamBrowser-src/JavaScriptCore.framework</p>            
    <p class="sourcecode" id="half_linespace">svn delete --force SafeExamBrowser-src/JavaScriptGlue.framework</p>           
            <p class="sourcecode" id="half_linespace">svn delete --force SafeExamBrowser-src/WebCore.framework</p>
<p class="sourcecode" id="half_linespace">svn delete --force SafeExamBrowser-src/WebKit.framework</p>
<p class="sourcecode" id="full_linespace">svn commit -m "deleted old WebKit frameworks" SafeExamBrowser-src</p>
    <p>Then you have to add the new frameworks to the <span class="codetext">SafeExamBrowser</span> project in Xcode. Important is to remove the <span class="codetext">WebCore.framework</span> from the <span class="quote"><strong>Link</strong> Binary With Libraries</span> build phase of the target Safe Exam Browser in Xcode, otherwise building will fail, since WebCore is only linked through its umbrella framework WebKit. The four frameworks also have to be in the <span class="quote">Copy Files</span> build phase.</p>
          <p>There is a <span class="quote">Code Signing</span> build setting in the <span class="codetext">SafeExamBrowser</span> Xcode project, which you will have to modify, because you don't have the <span class="quote">ETH Zurich</span> code signing identity. We will add an explanation about how to code sign the SEB binary to this manual after the implementation of further security measures in SEB based on checking code signatures of running processes.</p>
            <p>So when you succeeded to build SEB with a new version of the WebKit frameworks, you can check if it is really used on <a href="http://www.webkit.org/misc/WebKitDetect.html" target="_blank">this page</a>. 
            <script type="text/javascript">
var CollapsiblePanel1 = new Spry.Widget.CollapsiblePanel("CollapsiblePanel1");
        </script> 
            If it displays <span class="quote">Your WebKit version is a nightly build</span>, then SEB is using the private embedded WebKit.</p>
            <p>The second target in the Xcode project, <span class="quote">Safe Exam Browser App</span> (which is used to build the Mac App Store version of SEB), is using the system's built-in WebKit framework. </p>
    <p>Use <a href="../Popup-Fenster.html">this page</a> if you want to test the JavaScript popup window opening settings in SEB 1.5.x.</p>
  <!-- InstanceEndEditable -->

      <!-- Footer -->
      <footer>
          <div class="row">
              <div class="col-lg-12">
                  <p>Copyright &copy; 2010-2017 <a href="http://www.ethz.ch/index_EN" target="_blank">ETH Zurich</a>, <a href="http://www.let.ethz.ch/index_EN" target="_blank">Educational Development and Technology (LET)</a></p>
              </div>
          </div>
      </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

    <!-- Bootstrap Docs (for Sidebar) JavaScript -->
    <script src="../js/docs.min.js"></script>

<!-- InstanceBeginEditable name="scripts" -->
<!-- InstanceEndEditable -->

</body>

<!-- InstanceEnd --></html>
